<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Tasks subsystem · Replicante Core Manual</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Replicante uses an asynchronous tasks subsystem to schedule operations.&lt;/p&gt;
"/><meta name="docsearch:version" content="0.3.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Tasks subsystem · Replicante Core Manual"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.replicante.io/docs/manual/"/><meta property="og:description" content="&lt;p&gt;Replicante uses an asynchronous tasks subsystem to schedule operations.&lt;/p&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/docs/manual/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/docs/manual/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/manual/css/main.css"/><script src="/docs/manual/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/manual/"><h2 class="headerTitle">Replicante Core Manual</h2></a><a href="/docs/manual/versions"><h3>0.3.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/manual/docs/intro" target="_self">Docs</a></li><li class=""><a href="https://www.replicante.io" target="_self">Website</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Administration</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">First steps</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/quick-start">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/architecture">Architecture Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Features</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/features">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/features-discovery">Cluster Discovery</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/features-events">Events</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/features-webui">WebUI</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/features-introspection">Introspection</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Security</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/security">Security Considerations</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/security-transport">Agent Transports</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Administration</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/admin-deps">Dependencies</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/admin-install">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/admin-config">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/admin-flexible-deployment">Flexible Deployment</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/manual/docs/admin-tasks">Tasks subsystem</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Upgrades</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/upgrades-rolling">Rolling Upgrades</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/upgrades-versions">Version Compatibility</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/upgrades-notes">Upgrade Notes</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/upgrades-changelog">Change Log</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">replictl</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/replictl-intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/replictl-check">replictl check</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/replictl-coordinator">replictl coordinator</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/replictl-versions">replictl versions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/api">API Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/api-core">Core</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/api-grafana">Grafana</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/api-introspection">Introspection</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/api-webui">WebUI</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Scaling</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manual/docs/scaling">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/scaling-store">Stores</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/scaling-tasks">Task Queues</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/scaling-streams">Streams</a></li><li class="navListItem"><a class="navItem" href="/docs/manual/docs/scaling-coordinator">Coordinator</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Tasks subsystem</h1></header><article><div><span><p>Replicante uses an asynchronous tasks subsystem to schedule operations.</p>
<p>The health of the tasks subsystem is critical to the correct functioning of the system.
Nodes configured to run the <code>workers</code> component are responsible for the execution of tasks.
The tasks each node processes are configured with the <code>task_workers.*</code> options.</p>
<blockquote class="warning">
<p>Be aware that if the task system becomes unhealthy other parts of the system may appear
to be functioning correctly but operations may not be performed or they may be delayed.</p>
</blockquote>
<p>Once at least one node is configured with the <code>workers</code> component enabled the <code>replicore_workers_enabled</code>
family of metrics reports how many worker nodes are enabled for each task worker.</p>
<p>Additionally the following metrics can be used to check the health of the workers:</p>
<ul>
<li><code>replicore_tasks_worker_received</code>: number of tasks each node has received for each task queue.</li>
<li><code>replicore_tasks_ack_errors</code>: number of task acknowledgements that failed to be processed
by the configured task queue system (kafka).
<ul>
<li><code>{op=&quot;fail&quot;}</code>: errors acknowledging a failed task.</li>
<li><code>{op=&quot;fail[skip]&quot;}</code>: errors acknowledging a task that was skipped because it failed too many times.</li>
<li><code>{op=&quot;skip&quot;}</code>: errors acknowledging a skipped task (application code decided not to process the task).</li>
<li><code>{op=&quot;success&quot;}</code>: error acknowledging a successfully processed task.</li>
</ul></li>
<li><code>replicore_tasks_ack_total</code>: number of task acknowledgements that were sent to the configured
task queue system (kafka).
<ul>
<li><code>{op=&quot;fail&quot;}</code>: acknowledgement of a failed task.</li>
<li><code>{op=&quot;fail[skip]&quot;}</code>: acknowledgement of a task that was skipped because it failed too many times.</li>
<li><code>{op=&quot;skip&quot;}</code>: acknowledgement of a skipped task (application code decided not to process the task).</li>
<li><code>{op=&quot;success&quot;}</code>: acknowledgement of a successfully processed task.</li>
</ul></li>
</ul>
<blockquote class="info">
<p>When monitoring the tasks subsystem, or the system in general,
always incorporate metrics reported by Replicante's dependencies.
This information may be helpful in spotting issues that would not
be clear through Replicante metrics only.</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/manual/docs/admin-flexible-deployment"><span class="arrow-prev">← </span><span>Flexible Deployment</span></a><a class="docs-next button" href="/docs/manual/docs/upgrades-rolling"><span>Rolling Upgrades</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap" style="text-align:center"><div><h5>Docs</h5><a href="/docs/manual/docs/quick-start">Quick Start</a><a href="/docs/manual/docs/features">Features</a><a href="/docs/manual/docs/api">API Reference</a></div><div><h5>Community</h5><a href="https://github.com/replicante-io">GitHub Organisation</a><a href="https://www.replicante.io/">Official Website</a></div></section><section class="copyright">Copyright © 2019 Stefano Pogliani</section></footer></div></body></html>